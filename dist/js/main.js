!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}o.r(e);var l=function(t){function e(t,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}(this,r(e).call(this)),!t instanceof E&&console.error("Argument editor must be an Editor!"),i.hitArea=new PIXI.Rectangle(0,0,t.GRID_BOX_SIZE,t.GRID_BOX_SIZE),i.sprite=new PIXI.Sprite(o),i.addChild(i.sprite),i.editor=t,i.interactive=!0,i.cursor="pointer",i.on("onload",i.onDragStart).on("mousedown",i.onDragStart).on("touchstart",i.onDragStart).on("mouseup",i.onDragEnd).on("mouseupoutside",i.onDragEnd).on("touchend",i.onDragEnd).on("touchendoutside",i.onDragEnd).on("mousemove",i.onDragMove).on("touchmove",i.onDragMove).on("rightclick",function(){t.remove(s(i)),t.emit("update")}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,PIXI.Graphics),function(t,e,o){e&&i(t.prototype,e),o&&i(t,o)}(e,[{key:"onDragStart",value:function(t){t.stopPropagation(),this.data=t.data,this.dragging=!0,this.alpha=.5,this.editor.mode=m,this.posOld={x:this.position.x,y:this.position.y},this.posTemp={x:this.position.x,y:this.position.y}}},{key:"onDragMove",value:function(){if(this.dragging){var t=this.data.getLocalPosition(this.parent),e=this.editor.getGridPos(t.x,t.y),o=e.x,n=e.y;this.position.x=o,this.position.y=n,(this.posTemp.x!==o||this.posTemp.y!==n)&&(this.posTemp={x:o,y:n},this.editor.emit("update"))}}},{key:"onDragEnd",value:function(){for(var t in this.data=null,this.dragging=!1,this.alpha=1,this.editor.mode=g,this.editor.instances){var e=this.editor.instances[t];if(e!==this&&e.position.x===this.position.x&&e.position.y===this.position.y){this.position.x=this.posOld.x,this.position.y=this.posOld.y;break}}this.editor.emit("update")}}]),e}();function u(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}var c=function(){function t(e,o){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.app=e,this.stage=o;var i,r,s=!1;e.renderer.plugins.interaction.on("mousedown",function(t){if(2===t.data.originalEvent.which){t.data.originalEvent.preventDefault();var e=t.data.global;i=e.x,r=e.y,s=!0}}).on("mousemove",function(t){if(s){var e=t.data.global,n=e.x-i,a=e.y-r;o.position.x+=n,o.position.y+=a,i=e.x,r=e.y}}).on("mouseup",function(){s=!1});var a=function(t){var o=e.renderer.plugins.interaction.mouse.global;if(!(0>o.x||o.x>e.screen.width||0>o.y||o.y>e.screen.height)){var i=0>(t.deltaY||t.detail)?1:-1;n.zoom(1+.1*i)}},l=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.attachEvent?document.attachEvent("on"+l,a):document.addEventListener&&document.addEventListener(l,a,!1)}return function(t,e,o){e&&u(t.prototype,e),o&&u(t,o)}(t,[{key:"setPosition",value:function(t,e){this.stage.position.x=t+this.app.renderer.width*this.stage.scale.x/2,this.stage.position.y=e+this.app.renderer.height*this.stage.scale.y/2}},{key:"zoom",value:function(t){var e=this.stage.toLocal(this.app.renderer.plugins.interaction.mouse.global);this.stage.scale.x*=t,this.stage.scale.y*=t,2<=this.stage.scale.x&&(this.stage.scale.x=2,this.stage.scale.y=2),.2>=this.stage.scale.x&&(this.stage.scale.x=.2,this.stage.scale.y=.2),this.stage.updateTransform();var o=this.stage.toLocal(this.app.renderer.plugins.interaction.mouse.global);this.stage.position.x+=(o.x-e.x)*this.stage.scale.x,this.stage.position.y+=(o.y-e.y)*this.stage.scale.y,this.stage.updateTransform()}}]),t}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=0,m=1,E=function(t){function e(t,o){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?d(t):e}(this,f(e).call(this)),!t instanceof PIXI.Application)console.error("Argument app must be an PIXI.Application!");else{o=Object.assign({grid_box_size:32,stage:new PIXI.Container,posX:t.renderer.width/2,posY:t.renderer.height/2},o),n.app=t,n.stage=o.stage,n.stage.position.x=o.posX,n.stage.position.y+=o.posY,n.GRID_BOX_SIZE=o.grid_box_size,n.app.stage.addChild(n.stage),n.instances=[],n.mode=0;var i=49*n.GRID_BOX_SIZE,r=PIXI.Texture.from("./assets/bg.jpg"),s=new PIXI.TilingSprite(r,i,i);s.position.set(-s.width/2+n.GRID_BOX_SIZE/2,-s.height/2+n.GRID_BOX_SIZE/2),n.stage.addChild(s);var a=new PIXI.Graphics;a.beginFill(16777215,.1),a.drawRect(0,0,n.GRID_BOX_SIZE,n.GRID_BOX_SIZE),n.stage.addChild(a);var l=d(n);t.renderer.plugins.interaction.on("mousemove",function(t){var e=l.getGridPos(l.stage.toLocal(t.data.global).x,l.stage.toLocal(t.data.global).y),o=e.x,n=e.y;a.position.x=o,a.position.y=n});var u=new PIXI.Graphics;u.lineStyle(2,8947848,.2),u.moveTo(n.GRID_BOX_SIZE/2,-1e4),u.lineTo(n.GRID_BOX_SIZE/2,1e4),u.moveTo(-1e4,n.GRID_BOX_SIZE/2),u.lineTo(1e4,n.GRID_BOX_SIZE/2),n.stage.addChild(u),n.camera=new c(n.app,n.stage),n.camera.setPosition(0,0)}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,PIXI.utils.EventEmitter),function(t,e,o){e&&h(t.prototype,e),o&&h(t,o)}(e,[{key:"add",value:function(t){return!(!t instanceof l||(this.instances.push(t),this.stage.addChild(t),this.emit("update"),0))}},{key:"remove",value:function(t){var e=this.instances.indexOf(t);-1!==e&&this.instances.splice(e,1),this.stage.removeChild(t),this.emit("update")}},{key:"removeAll",value:function(){for(var t=this.instances.slice(),e=0;e<t.length;e++)this.remove(t[e])}},{key:"getGridPos",value:function(t,e){return{x:t=Math.floor(t/this.GRID_BOX_SIZE)*this.GRID_BOX_SIZE,y:e=Math.floor(e/this.GRID_BOX_SIZE)*this.GRID_BOX_SIZE}}},{key:"isInMode",value:function(){return this.mode!==g}}]),e}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(t,o){return v(this,e),b(this,I(e).call(this,t,o))}return S(e,l),e}();R.id=0,R.ingameName="default",R.type="";var x=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/extension.png")))).sprite.anchor.set(-.19),o.sprite.scale.x=.37,o.sprite.scale.y=.37,o}return S(e,R),e}();x.id=1,x.ingameName="Extension",x.type="STRUCTURE_EXTENSION";var O=function(t){function e(t){return v(this,e),b(this,I(e).call(this,t))}return S(e,R),e}();O.id=2,O.ingameName="Road",O.type="STRUCTURE_ROAD";var w=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/lab.png")))).sprite.height=32,o.sprite.width=32,o}return S(e,R),e}();w.id=3,w.ingameName="Lab",w.type="STRUCTURE_LAB";var U=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/link.png")))).sprite.height=32,o.sprite.width=32,o}return S(e,R),e}();U.id=4,U.ingameName="Link",U.type="STRUCTURE_LINK";var N=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/spawn.png")))).sprite.height=45,o.sprite.width=45,o.sprite.anchor.set(.18),o}return S(e,R),e}();N.id=5,N.ingameName="Spawn",N.type="STRUCTURE_SPAWN";var X=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/storage.png")))).sprite.anchor.set(.1,.15),o.sprite.scale.x=.8,o.sprite.scale.y=.8,o}return S(e,R),e}();X.id=6,X.ingameName="Storage",X.type="STRUCTURE_STORAGE";var C=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/terminal.png")))).sprite.height=32,o.sprite.width=32,o}return S(e,R),e}();C.id=7,C.ingameName="Terminal",C.type="STRUCTURE_TERMINAL";var P=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t,PIXI.Texture.from("assets/tower.png")))).sprite.anchor.set(-.02,0),o.sprite.scale.x=.6,o.sprite.scale.y=.6,o}return S(e,R),e}();P.id=8,P.ingameName="Tower",P.type="STRUCTURE_TOWER";var D=function(t){function e(t){var o;return v(this,e),(o=b(this,I(e).call(this,t))).sprite.height=32,o.sprite.width=32,o}return S(e,R),e}();D.id=9,D.ingameName="Wall",D.type="STRUCTURE_WALL";var B=[O,x,D,P,C,X,N,U,w];function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}function j(t,e,o){return e&&k(t.prototype,e),o&&k(t,o),t}var Z=function(){function t(){G(this,t)}return j(t,null,[{key:"generate",value:function(t){var e="//Generated by BlueScreeps 1.1.0\r\nconst blueprint = (room_, x, y) => _.each([";for(var o in t.instances){var n=t.instances[o];if(n instanceof R){0==o%5&&0!==parseInt(o)&&parseInt(o)!==t.instances.length-1&&(e+="\r\n");var i=t.getGridPos(n.position.x,n.position.y),r=i.x,s=i.y;e+="["+n.constructor.type+", "+r/t.GRID_BOX_SIZE+", "+s/t.GRID_BOX_SIZE+"], "}}return 0<t.instances.length&&(e=e.slice(0,e.length-2)),e+="], (s) => {room_.createConstructionSite(x+s[1], y+s[2], s[0]);});\r\n\r\nmodule.exports = {blueprint};"}}]),t}(),F=function(){function t(){G(this,t)}return j(t,null,[{key:"loadFromCode",value:function(t,e){var o=[],n=e.match(new RegExp(/\[[A-Z_]*,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]?[\+\x2D\.0-9]*,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]?[\+\x2D\.0-9]*\]/gm)),i={};for(var r in B)i[B[r].type]=B[r];for(var s in n){var a,l,u=void 0,c=n[s].trim().slice(1,n[s].length-1).split(",");u=i[c[0]],a=parseFloat(c[1]),l=parseFloat(c[2]);var p=new u(t);p.position.x=a*t.GRID_BOX_SIZE,p.position.y=l*t.GRID_BOX_SIZE,o.push(p)}return o}},{key:"serialize",value:function(t){var e="";for(var o in t.instances){var n=t.instances[o].constructor.id,i=t.getGridPos(t.instances[o].position.x,t.instances[o].position.y),r=i.x,s=i.y;e+=n+","+(r/=t.GRID_BOX_SIZE)+","+(s/=t.GRID_BOX_SIZE)+";"}return window.btoa(e)}},{key:"unserialize",value:function(t,e){var o=[],n=window.atob(e).split(";");for(var i in n){var r=void 0,s=n[i].split(","),a=parseInt(s[0]),l=parseInt(s[1]),u=parseInt(s[2]);for(var c in B)if(B[c].id===a){r=B[c];break}if(null!=r){var p=new r(t);p.position.x=l*t.GRID_BOX_SIZE,p.position.y=u*t.GRID_BOX_SIZE,o.push(p)}}return o}}]),t}();function L(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}var A=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.editor=e,this.roads=new PIXI.Graphics,this.walls=new PIXI.Graphics,e.stage.addChild(this.roads),e.stage.addChild(this.walls)}return function(t,e,o){e&&L(t.prototype,e),o&&L(t,o)}(t,[{key:"draw",value:function(){this.roads.clear(),this.walls.clear();for(var t=this.editor.instances,e=0;e<t.length;e++){if(t[e]instanceof D){var o=t[e];o.neighbor={top:!1,bottom:!1,left:!1,right:!1};for(var n=0;n<t.length;n++)if(t[n]instanceof D){var i=t[n];i.position.y+32===o.position.y&&i.position.x===o.position.x&&(o.neighbor.top=!0),i.position.y-32===o.position.y&&i.position.x===o.position.x&&(o.neighbor.bottom=!0),i.position.x-32===o.position.x&&i.position.y===o.position.y&&(o.neighbor.right=!0),i.position.x+32===o.position.x&&i.position.y===o.position.y&&(o.neighbor.left=!0)}}if(t[e]instanceof O){var r=t[e];r.neighbor={top:!1,bottom:!1,left:!1,right:!1,topright:!1,topleft:!1,bottomright:!1,bottomleft:!1};for(var s=0;s<t.length;s++)if(t[s]instanceof O){var a=t[s];a.position.y+32===r.position.y&&a.position.x===r.position.x&&(r.neighbor.top=!0),a.position.y-32===r.position.y&&a.position.x===r.position.x&&(r.neighbor.bottom=!0),a.position.x-32===r.position.x&&a.position.y===r.position.y&&(r.neighbor.right=!0),a.position.x+32===r.position.x&&a.position.y===r.position.y&&(r.neighbor.left=!0),a.position.y+32===r.position.y&&a.position.x-32===r.position.x&&(r.neighbor.topright=!0),a.position.y+32===r.position.y&&a.position.x+32===r.position.x&&(r.neighbor.topleft=!0),a.position.y-32===r.position.y&&a.position.x+32===r.position.x&&(r.neighbor.bottomleft=!0),a.position.y-32===r.position.y&&a.position.x-32===r.position.x&&(r.neighbor.bottomright=!0)}}}this.roads.beginFill("0x828282"),this.roads.lineStyle(12,8553090,1);for(var l,u=0;u<t.length;u++)(l=t[u])instanceof O&&(this.roads.lineStyle(0,8553090,1),this.roads.drawCircle(l.position.x+16,l.position.y+16,4),this.roads.lineStyle(8,8553090,1),l.neighbor.top&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x+16,l.position.y)),l.neighbor.right&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x+32,l.position.y+16)),l.neighbor.bottom&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x+16,l.position.y+32)),l.neighbor.left&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x,l.position.y+16)),l.neighbor.topright&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x+32,l.position.y)),l.neighbor.topleft&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x,l.position.y)),l.neighbor.bottomright&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x+32,l.position.y+32)),l.neighbor.bottomleft&&(this.roads.moveTo(l.position.x+16,l.position.y+16),this.roads.lineTo(l.position.x,l.position.y+32))),this.walls.beginFill(723723),l instanceof D&&(this.walls.lineStyle(0,723723,1),this.walls.drawCircle(l.position.x+16,l.position.y+16,16),this.walls.lineStyle(32,723723,1),l.neighbor.top&&(this.walls.moveTo(l.position.x+16,l.position.y+16),this.walls.lineTo(l.position.x+16,l.position.y)),l.neighbor.right&&(this.walls.moveTo(l.position.x+16,l.position.y+16),this.walls.lineTo(l.position.x+32,l.position.y+16)),l.neighbor.bottom&&(this.walls.moveTo(l.position.x+16,l.position.y+16),this.walls.lineTo(l.position.x+16,l.position.y+32)),l.neighbor.left&&(this.walls.moveTo(l.position.x+16,l.position.y+16),this.walls.lineTo(l.position.x,l.position.y+16)));this.walls.endFill(),this.walls.updateTransform(),this.roads.endFill(),this.roads.updateTransform()}}]),t}();function M(t,e){for(var o,n=0;n<e.length;n++)(o=e[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}var z=function(){function t(e,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.app=e,this.editor=o,this.constructions=[],this.selectedElement=null}return function(t,e,o){e&&M(t.prototype,e),o&&M(t,o)}(t,[{key:"addConstruct",value:function(t){this.constructions.push(t),null==this.selectedElement&&(this.selectedElement=t)}},{key:"addConstructs",value:function(t){for(var e=0;e<t.length;e++)this.addConstruct(t[e])}},{key:"generateGUI",value:function(t){for(var e=this,o=[],n=document.getElementById(t),i=function(t){var i=e.constructions[t],r=document.createElement("a");r.href="#",r.id=i.type,r.innerHTML="<span>"+i.ingameName+"</span>",o.push(r),n.append(r),r.onclick=function(){e.selectedElement=i,o.map(function(t){t.className=t.className.replace(" current","")}),r.className+=" current"}},r=0;r<e.constructions.length;r++)i(r);this.app.stage.interactive=!0,this.app.renderer.plugins.interaction.on("mousedown",function(t){if(!e.editor.isInMode()&&1===t.data.originalEvent.which){var o=Math.floor(e.editor.stage.toLocal(e.app.renderer.plugins.interaction.mouse.global).x/e.editor.GRID_BOX_SIZE)*e.editor.GRID_BOX_SIZE,n=Math.floor(e.editor.stage.toLocal(e.app.renderer.plugins.interaction.mouse.global).y/e.editor.GRID_BOX_SIZE)*e.editor.GRID_BOX_SIZE,i=new e.selectedElement(e.editor);i.position.x=o,i.position.y=n,e.editor.add(i)}})}}]),t}(),W=document.getElementById("canvas"),H=document.getElementById("generateCodeButton"),Y=document.getElementById("clearButton"),K=document.getElementById("code"),q=document.getElementById("shareButton"),J=(document.getElementById("shareTextBox"),document.getElementById("zoomIn")),Q=document.getElementById("zoomOut");!function(){function t(){var t=e.view.parentNode;e.renderer.resize(t.clientWidth,t.clientHeight)}var e=new PIXI.Application({transparent:!0,resolution:window.devicePixelRatio||1,autoResize:!0,antialias:!0}),o=new E(e),n=new z(e,o),i=new A(o),r=function(){K.innerHTML=Z.generate(o),Prism.highlightElement(K)};n.addConstructs(B),n.generateGUI("gui-selection"),W.appendChild(e.view),e.view.addEventListener("contextmenu",function(t){t.preventDefault()}),window.onload=function(){return r()},null!=H&&(H.onclick=function(t){t.preventDefault(),r()}),null!=Y&&(Y.onclick=function(t){t.preventDefault(),o.removeAll()}),null!=J&&(J.onclick=function(t){t.preventDefault(),o.camera.zoom(1.1)}),null!=Q&&(Q.onclick=function(t){t.preventDefault(),o.camera.zoom(.9)}),o.on("update",function(){i.draw(),r()}),null!=q&&(q.onclick=function(t){t.preventDefault();var e=document.createElement("textarea");e.value=location.protocol+"//"+location.host+location.pathname+"?code="+F.serialize(o),document.body.appendChild(e),e.focus(),e.select(),e.setSelectionRange(0,99999);try{document.execCommand("copy");console.log("successful")}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(e)});var s=F.loadFromCode(o,"[[STRUCTURE_EXTENSION, -7, -2], [STRUCTURE_EXTENSION, -7, -1], [STRUCTURE_EXTENSION, -7, 0], [STRUCTURE_EXTENSION, -7, 1], [STRUCTURE_EXTENSION, -7, 2],        [STRUCTURE_EXTENSION, -6, 0], [STRUCTURE_EXTENSION, -5, 0], [STRUCTURE_EXTENSION, -5, -1], [STRUCTURE_EXTENSION, -5, -2], [STRUCTURE_EXTENSION, -5, 1],        [STRUCTURE_EXTENSION, -5, 2], [STRUCTURE_EXTENSION, -3, -2], [STRUCTURE_EXTENSION, -3, -1], [STRUCTURE_EXTENSION, -3, 0], [STRUCTURE_EXTENSION, -3, 1],        [STRUCTURE_EXTENSION, -3, 2], [STRUCTURE_EXTENSION, -2, 2], [STRUCTURE_EXTENSION, -2, 0], [STRUCTURE_EXTENSION, -2, -2], [STRUCTURE_EXTENSION, 0, -2],        [STRUCTURE_EXTENSION, 0, -1], [STRUCTURE_EXTENSION, 0, 0], [STRUCTURE_EXTENSION, 0, 1], [STRUCTURE_EXTENSION, 0, 2], [STRUCTURE_EXTENSION, 1, 2],        [STRUCTURE_EXTENSION, 3, -2], [STRUCTURE_EXTENSION, 3, 0], [STRUCTURE_EXTENSION, 3, -1], [STRUCTURE_EXTENSION, 3, 1], [STRUCTURE_EXTENSION, 3, 2],        [STRUCTURE_EXTENSION, 4, 2], [STRUCTURE_EXTENSION, 6, -1], [STRUCTURE_EXTENSION, 6, 0], [STRUCTURE_EXTENSION, 6, 1], [STRUCTURE_EXTENSION, 7, 2],        [STRUCTURE_EXTENSION, 8, 1], [STRUCTURE_EXTENSION, 8, 0], [STRUCTURE_EXTENSION, 8, -1], [STRUCTURE_EXTENSION, 7, -2]]"),a=new URL(window.location.href).searchParams.get("code");for(var l in null!=a&&(s=F.unserialize(o,a)),s)o.add(s[l]);window.addEventListener("resize",function(){e.renderer.resize(1,1),function(t,e){var o;return e=e||100,function(n){o&&clearTimeout(o),o=setTimeout(t,e,n)}}(t)()}),t(),o.camera.setPosition(0,0)}()}]);
//# sourceMappingURL=main.js.map